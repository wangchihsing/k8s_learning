<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes ç«¯å£æµé‡èµ°å‘åœ–è§£</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .diagram-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }
        
        .flow-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .network-layer {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 10px;
            flex: 1;
            min-width: 250px;
            text-align: center;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .network-layer:hover {
            transform: translateY(-5px);
        }
        
        .network-layer.mac {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }
        
        .network-layer.vm {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            color: #2d3436;
        }
        
        .network-layer.k8s {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        }
        
        .arrow {
            font-size: 2em;
            color: #e74c3c;
            margin: 0 10px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        .port-detail {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #27ae60;
        }
        
        .port-detail.error {
            background: #fde8e8;
            border-left-color: #e74c3c;
        }
        
        .port-detail.success {
            background: #e8f8f5;
            border-left-color: #00b894;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .highlight {
            background: #fff3cd;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .flow-step {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .step-number {
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .comparison-item.wrong {
            background: #ffeaa7;
            border: 2px solid #e17055;
        }
        
        .comparison-item.right {
            background: #d1f2eb;
            border: 2px solid #00b894;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ Kubernetes ç«¯å£æµé‡èµ°å‘å®Œæ•´åœ–è§£</h1>
        
        <div class="diagram-section">
            <h2>ğŸ“¡ ä½ çš„ç¶²è·¯ç’°å¢ƒæ¶æ§‹</h2>
            <div class="flow-container">
                <div class="network-layer mac">
                    <h3>ğŸ–¥ï¸ Mac (å¯¦é«”æ©Ÿ)</h3>
                    <p><strong>ä½ çš„é›»è…¦</strong></p>
                    <p>IP: 192.168.200.xxx</p>
                    <p>æƒ³è¦è¨ªå•ç¶²é </p>
                </div>
                <div class="arrow">â†’</div>
                <div class="network-layer vm">
                    <h3>ğŸ’» è™›æ“¬æ©Ÿ</h3>
                    <p><strong>Ubuntu/Linux</strong></p>
                    <p>IP: 192.168.200.196</p>
                    <p>é‹è¡Œ Minikube</p>
                </div>
                <div class="arrow">â†’</div>
                <div class="network-layer k8s">
                    <h3>â˜¸ï¸ Kubernetes é›†ç¾¤</h3>
                    <p><strong>Minikube</strong></p>
                    <p>IP: 192.168.49.2</p>
                    <p>é‹è¡Œ Nginx Pod</p>
                </div>
            </div>
        </div>

        <div class="diagram-section">
            <h2>ğŸš« ç‚ºä»€éº¼ç›´æ¥è¨ªå•ä¸è¡Œï¼Ÿ</h2>
            <div class="comparison">
                <div class="comparison-item wrong">
                    <h3>âŒ éŒ¯èª¤å˜—è©¦</h3>
                    <div class="code-block">http://192.168.49.2:31000</div>
                    <p><strong>å•é¡Œï¼š</strong>Mac çœ‹ä¸åˆ° Minikube çš„å…§éƒ¨ IP</p>
                    <p>å°±åƒåœ¨å°åŒ—æƒ³ç›´æ¥æ’¥æ‰“ã€Œå…¬å¸å…§éƒ¨åˆ†æ©Ÿã€</p>
                </div>
                <div class="comparison-item right">
                    <h3>âœ… æ­£ç¢ºæ–¹æ³•</h3>
                    <div class="code-block">http://192.168.200.196:9080</div>
                    <p><strong>è§£æ±ºï¼š</strong>é€éè™›æ“¬æ©Ÿ IP + ç«¯å£è½‰ç™¼</p>
                    <p>å…ˆæ‰“çµ¦ç¸½æ©Ÿï¼Œå†è½‰æ¥åˆ°åˆ†æ©Ÿ</p>
                </div>
            </div>
        </div>

        <div class="diagram-section">
            <h2>ğŸ”„ æˆåŠŸçš„å®Œæ•´æµé‡è·¯å¾‘</h2>
            
            <div class="flow-step">
                <div class="step-number">1</div>
                <div>
                    <strong>Mac ç™¼èµ·è«‹æ±‚</strong><br>
                    <code>curl http://192.168.200.196:9080</code><br>
                    <small>ä½ çš„ Mac å‘è™›æ“¬æ©Ÿçš„ 9080 ç«¯å£ç™¼é€è«‹æ±‚</small>
                </div>
            </div>

            <div class="flow-step">
                <div class="step-number">2</div>
                <div>
                    <strong>è™›æ“¬æ©Ÿæ¥æ”¶è«‹æ±‚</strong><br>
                    <code>è™›æ“¬æ©Ÿ 192.168.200.196:9080</code><br>
                    <small>è™›æ“¬æ©Ÿçš„ 9080 ç«¯å£æ¥æ”¶åˆ°è«‹æ±‚</small>
                </div>
            </div>

            <div class="flow-step">
                <div class="step-number">3</div>
                <div>
                    <strong>kubectl port-forward è½‰ç™¼</strong><br>
                    <code>kubectl port-forward service/nginx-nodeport 9080:80</code><br>
                    <small>å°‡ 9080 ç«¯å£çš„æµé‡è½‰ç™¼åˆ° Service çš„ 80 ç«¯å£</small>
                </div>
            </div>

            <div class="flow-step">
                <div class="step-number">4</div>
                <div>
                    <strong>Service æ¥æ”¶ä¸¦è½‰ç™¼</strong><br>
                    <code>nginx-nodeport Service port:80 â†’ targetPort:80</code><br>
                    <small>Service å°‡æµé‡è½‰ç™¼åˆ° Pod çš„ 80 ç«¯å£</small>
                </div>
            </div>

            <div class="flow-step">
                <div class="step-number">5</div>
                <div>
                    <strong>Pod è™•ç†è«‹æ±‚</strong><br>
                    <code>Nginx å®¹å™¨ containerPort:80</code><br>
                    <small>Nginx æ‡‰ç”¨ç¨‹å¼è™•ç† HTTP è«‹æ±‚ä¸¦å›æ‡‰</small>
                </div>
            </div>

            <div class="flow-step">
                <div class="step-number">6</div>
                <div>
                    <strong>å›æ‡‰è¿”å›</strong><br>
                    <code>Nginx æ­¡è¿é é¢</code><br>
                    <small>æ²¿è‘—åŸè·¯è¿”å›åˆ°ä½ çš„ Mac ç€è¦½å™¨</small>
                </div>
            </div>
        </div>

        <div class="diagram-section">
            <h2>ğŸ”§ ä¸‰ç¨®ç«¯å£çš„ä½œç”¨</h2>
            
            <div class="port-detail">
                <h3>ğŸ  containerPort: 80</h3>
                <p><strong>Pod å…§éƒ¨ç«¯å£</strong> - Nginx æ‡‰ç”¨ç¨‹å¼å¯¦éš›ç›£è½çš„ç«¯å£</p>
                <div class="code-block">containers:
- name: nginx
  ports:
  - containerPort: 80  # â† å®¹å™¨å…§çš„ã€Œæˆ¿é–“è™Ÿã€</div>
            </div>

            <div class="port-detail">
                <h3>ğŸšª Service port: 80 & targetPort: 80</h3>
                <p><strong>Service ç«¯å£</strong> - é›†ç¾¤å…§éƒ¨è¨ªå• Service çš„ç«¯å£</p>
                <div class="code-block">ports:
- port: 80        # â† Service çš„ã€Œå¤§é–€ã€
  targetPort: 80  # â† è½‰ç™¼åˆ° Pod çš„ã€Œæˆ¿é–“è™Ÿã€</div>
            </div>

            <div class="port-detail">
                <h3>ğŸŒ nodePort: 31000</h3>
                <p><strong>ç¯€é»ç«¯å£</strong> - é›†ç¾¤å¤–éƒ¨è¨ªå•çš„ç«¯å£ï¼ˆ30000-32767ï¼‰</p>
                <div class="code-block">ports:
- port: 80
  targetPort: 80
  nodePort: 31000  # â† å°å¤–çš„ã€Œç¸½æ©Ÿè™Ÿç¢¼ã€</div>
            </div>
        </div>

        <div class="diagram-section">
            <h2>ğŸ› ä½ é‡åˆ°çš„ç«¯å£è¡çªå•é¡Œ</h2>
            
            <div class="port-detail error">
                <h3>âŒ å¤±æ•—çš„ port-forward</h3>
                <div class="code-block">kubectl port-forward service/nginx-nodeport 8080:80
Error: address already in use</div>
                <p><strong>åŸå› ï¼š</strong>è™›æ“¬æ©Ÿä¸Šå·²ç¶“æœ‰ç¨‹å¼ä½”ç”¨äº† 8080 ç«¯å£</p>
            </div>

            <div class="port-detail success">
                <h3>âœ… æˆåŠŸçš„ port-forward</h3>
                <div class="code-block">kubectl port-forward service/nginx-nodeport 9080:80 --address 0.0.0.0</div>
                <p><strong>è§£æ±ºï¼š</strong>æ›æˆæ²’è¢«ä½”ç”¨çš„ 9080 ç«¯å£</p>
            </div>
        </div>

        <div class="diagram-section">
            <h2>ğŸ  ç”¨æˆ¿å­æ¯”å–»ç†è§£ç«¯å£</h2>
            <div class="flow-container">
                <div style="background: #74b9ff; color: white; padding: 20px; border-radius: 10px; flex: 1; margin: 10px;">
                    <h3>ğŸ¢ å¤§æ¨“ (IP åœ°å€)</h3>
                    <p>192.168.200.196</p>
                    <p>è™›æ“¬æ©Ÿé€™æ£Ÿã€Œå¤§æ¨“ã€</p>
                </div>
                <div class="arrow">+</div>
                <div style="background: #fd79a8; color: white; padding: 20px; border-radius: 10px; flex: 1; margin: 10px;">
                    <h3>ğŸšª æˆ¿é–“è™Ÿ (Port)</h3>
                    <p>9080</p>
                    <p>å¤§æ¨“è£¡çš„ã€Œæˆ¿é–“è™Ÿç¢¼ã€</p>
                </div>
                <div class="arrow">=</div>
                <div style="background: #00b894; color: white; padding: 20px; border-radius: 10px; flex: 1; margin: 10px;">
                    <h3>ğŸ“¬ å®Œæ•´åœ°å€</h3>
                    <p>192.168.200.196:9080</p>
                    <p>å¯ä»¥æ‰¾åˆ°çš„ã€Œå®Œæ•´åœ°å€ã€</p>
                </div>
            </div>
        </div>

        <div class="diagram-section">
            <h2>ğŸ¯ é—œéµå­¸ç¿’é‡é»</h2>
            <div class="port-detail">
                <h3>1. ç¶²è·¯å±¤ç´šéš”é›¢</h3>
                <p>ä¸åŒç¶²è·¯å±¤ä¹‹é–“éœ€è¦ã€Œæ©‹æ¨‘ã€æ‰èƒ½é€šè¨Š</p>
            </div>
            <div class="port-detail">
                <h3>2. ç«¯å£å”¯ä¸€æ€§</h3>
                <p>åŒä¸€å€‹ IP åœ°å€ä¸Šï¼Œä¸€å€‹ç«¯å£åªèƒ½è¢«ä¸€å€‹ç¨‹å¼ä½¿ç”¨</p>
            </div>
            <div class="port-detail">
                <h3>3. port-forward çš„é­”æ³•</h3>
                <p>åƒæ˜¯åœ¨ä¸åŒç¶²è·¯å±¤ä¹‹é–“æ¶è¨­ã€Œå°ˆç”¨é›»è©±ç·šã€</p>
            </div>
        </div>
    </div>
</body>
</html>
